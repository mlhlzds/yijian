<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.easy.dao.DailyDao">

	<insert id="addDaily" parameterType="java.util.Map">
		insert into y_daily
		(d_title, d_daily ,d_date,u_id) values(#{title}, #{daily} ,#{date},#{uid})
	</insert>

	<select id="queryDaily" parameterType="java.util.Map" resultType="java.util.Map" >
		select yd.d_id as did, yd.d_daily as daily , yd.d_title as title ,yd.d_date as date ,yd.d_if as dif,yu.u_username as userName from y_daily yd ,y_user yu
		WHERE yd.u_id=yu.u_id
		group by
		yd.d_id
		order by yd.d_id desc
		limit #{pageStart}, #{limit}
		/*order by yd.d_id desc*/
	</select>

	<select id="querySingleDaily" parameterType="java.util.Map" resultType="java.util.Map" >
		select yd.d_id as did, yd.d_daily as daily , yd.d_title as title ,yd.d_date as date from y_daily yd
		WHERE 1=1
		<if test="did != null and did != '' ">
			and yd.d_id =#{did}
		</if>
	</select>

	<select id="countDaily" parameterType="java.util.Map" resultType="java.lang.Integer" >
		select count(yd.d_id) from y_daily yd ,y_user yu
		WHERE yd.u_id=yu.u_id
	</select>

	<update id="updateDaily" parameterType="java.util.Map">
		update y_daily
		<set>
				d_title= #{title},
				d_daily = #{daily},
				d_date= #{date}
		</set>
		where d_id = #{did}
	</update>

	<delete id="deleteDaily" parameterType="java.util.Map">
		delete from y_daily where d_id = #{did}
	</delete>

</mapper>